{
  "name": "Kotlin Multiplatform Development",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "containerEnv": {
    "JAVA_OPTS": "-Xmx2g -Xms512m",
    "GRADLE_USER_HOME": "/home/developer/.gradle",
    "JAVA_HOME": "/opt/java/openjdk"
  },
  "mounts": [
    "source=${localWorkspaceFolder}/projects,target=/home/developer/projects,type=bind",
    "source=kotlin-dev-gradle-cache,target=/home/developer/.gradle,type=volume",
    "source=${localEnv:HOME}/.ssh,target=/home/developer/.ssh,type=bind,readonly",
    "source=${localEnv:HOME}/.gitconfig,target=/home/developer/.gitconfig,type=bind,readonly"
  ],
  "workspaceFolder": "/home/developer/projects",
  "remoteUser": "developer",
  "containerUser": "developer",
  "postCreateCommand": "gradle --version && kotlin -version && echo 'Container ready for IntelliJ IDEA development'",
  "forwardPorts": [8080, 8081, 3000],
  "portsAttributes": {
    "8080": {
      "label": "Application Server"
    },
    "8081": {
      "label": "Debug Port"
    },
    "3000": {
      "label": "Frontend Dev Server"
    }
  },
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": true,
      "configureZshAsDefaultShell": true,
      "installOhMyZsh": true
    }
  },
  "onCreateCommand": "echo 'Setting up Kotlin Multiplatform development environment...'",
  "updateContentCommand": "gradle wrapper --gradle-version=8.10",
  "remoteEnv": {
    "DISPLAY": "${localEnv:DISPLAY}",
    "GRADLE_OPTS": "-Dorg.gradle.daemon=true -Dorg.gradle.parallel=true -Dorg.gradle.caching=true"
  }
}
